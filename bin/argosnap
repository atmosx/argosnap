#!/usr/bin/env ruby
require_relative File.expand_path('../../lib/argosnap', __FILE__)
require 'optparse'

options = {}

opt_parser = OptionParser.new do |opt|
  opt.banner = "argosnap #{Argosnap::VERSION} ( http://github/atmosx/argosnap )\nUsage: argosnap [OPTIONS]"
  opt.separator  ""
  opt.separator  "     version: dislay version"
  opt.separator  "     install: install necessary files"
  opt.separator  "     run: check tarsnap account"
  opt.separator  ""

  opt.on("-v","--version","version control") do |version|
    options[:version] = version
  end

  opt.on("-i","--install","install configuration files") do |install|
    options[:install] = install
  end
  
  opt.on("-r","--run","executes 'argosnap' and displayes notifications") do |run|
    options[:run] = run
  end

  opt.on("-h","--help","help") do
    puts opt_parser
  end
end

opt_parser.parse!

case ARGV[0]
when "version"
  puts Argosnap::VERSION
when "install"
  Argosnap::Action.new.install
when "run"
  Argosnap::Argos.new.balance
else
    puts opt_parser
end
